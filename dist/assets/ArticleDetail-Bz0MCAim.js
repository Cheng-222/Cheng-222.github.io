import{l as g,c as p,d as C,e as b,f,a as w}from"./storage-CeQ8XAxi.js";import{_ as A,c as o,a as e,d as k,e as d,t as n,n as x,F as v,r as u,b as h,f as y,v as D,o as c}from"./index-CCxU4HIp.js";const T={name:"ArticleDetail",data(){return{article:null,prevArticle:null,nextArticle:null,comments:[],newComment:"",categories:[{id:1,name:"技术分享"},{id:2,name:"生活随笔"},{id:3,name:"读书笔记"},{id:4,name:"项目经验"}]}},created(){this.fetchArticleDetail()},methods:{async fetchArticleDetail(){try{const s=parseInt(this.$route.params.id),t=C(s);if(!t)throw new Error("文章不存在");this.article={...t,tags:Array.isArray(t.tags)?t.tags:typeof t.tags=="string"?t.tags.split(","):[],publishTime:new Date(t.publishTime)},this.comments=b(s).map(m=>({...m,time:new Date(m.time)}));const l=f(s);this.prevArticle=l.prev,this.nextArticle=l.next,this.categories=w()}catch(s){console.error("加载文章详情失败:",s)}},submitComment(){if(!this.newComment.trim()){alert("请输入评论内容");return}const s=p(this.article.id,this.newComment.trim(),"当前用户");this.comments.push({...s,time:new Date(s.time)}),this.newComment="",alert("评论提交成功")},likeComment(s){g(this.article.id,s);const t=this.comments.findIndex(l=>l.id===s);t>=0&&(this.comments[t].likes+=1)},formatDate(s){const t=new Date(s);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},getCategoryName(s){const t=this.categories.find(l=>l.id===s);return t?t.name:"未分类"},goToArticle(s){this.$router.push(`/article/${s}`)},goToTag(s){this.$router.push(`/tags/${s}`)},submitComment(){if(!this.newComment.trim()){alert("请输入评论内容");return}const s={id:this.comments.length+1,author:"当前用户",time:new Date,content:this.newComment.trim(),likes:0};this.comments.push(s),this.newComment="",alert("评论提交成功")},likeComment(s){const t=this.comments.find(l=>l.id===s);t&&t.likes++}}},M={class:"article-detail-container"},B={class:"article-wrapper"},z={key:0,class:"article-content"},L={class:"article-header"},I={class:"article-title"},N={class:"article-meta"},S={class:"publish-time"},V={class:"read-time"},F={class:"article-tags"},E=["onClick"],H={key:0,class:"detail-cover"},P=["src"],U=["innerHTML"],Y={class:"article-stats"},j={class:"stat-item"},q={class:"stat-item"},G={class:"article-nav"},J={class:"nav-title"},K={class:"nav-title"},O={class:"comment-section"},Q={class:"comment-title"},R={class:"comment-input-area"},W={class:"comment-list"},X={class:"comment-avatar"},Z={class:"comment-content"},$={class:"comment-header"},tt={class:"comment-author"},et={class:"comment-time"},st={class:"comment-text"},it={class:"comment-actions"},at=["onClick"],nt={key:1,class:"loading"};function ot(s,t,l,m,i,r){return c(),o("div",M,[e("div",B,[i.article?(c(),o("div",z,[e("div",L,[e("h1",I,n(i.article.title),1),e("div",N,[e("span",S,n(r.formatDate(i.article.publishTime)),1),e("span",{class:x(["category",`category-${i.article.categoryId}`])},n(r.getCategoryName(i.article.categoryId)),3),e("span",V,n(i.article.readTime)+" 分钟阅读",1)]),e("div",F,[(c(!0),o(v,null,u(i.article.tags,a=>(c(),o("span",{key:a,class:"tag",onClick:_=>r.goToTag(a)}," #"+n(a),9,E))),128))]),i.article.cover?(c(),o("div",H,[e("img",{src:i.article.cover,alt:"文章封面"},null,8,P)])):d("",!0)]),e("div",{class:"article-body",innerHTML:i.article.content},null,8,U),e("div",Y,[e("div",j,[t[4]||(t[4]=e("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})],-1)),h(" "+n(i.article.views),1)]),e("div",q,[t[5]||(t[5]=e("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 0 .398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"})],-1)),h(" "+n(i.article.comments),1)])]),t[9]||(t[9]=k('<div class="share-buttons" data-v-0b58ee1a><button class="share-btn share-wechat" data-v-0b58ee1a><svg class="icon" viewBox="0 0 16 16" fill="currentColor" data-v-0b58ee1a><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-v-0b58ee1a></path></svg> 微信 </button><button class="share-btn share-weibo" data-v-0b58ee1a><svg class="icon" viewBox="0 0 16 16" fill="currentColor" data-v-0b58ee1a><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-v-0b58ee1a></path></svg> 微博 </button><button class="share-btn share-link" data-v-0b58ee1a><svg class="icon" viewBox="0 0 16 16" fill="currentColor" data-v-0b58ee1a><path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z" data-v-0b58ee1a></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z" data-v-0b58ee1a></path></svg> 复制链接 </button></div>',1)),e("div",G,[i.prevArticle?(c(),o("div",{key:0,class:"prev-article",onClick:t[0]||(t[0]=a=>r.goToArticle(i.prevArticle.id))},[t[6]||(t[6]=e("span",{class:"nav-label"},"上一篇",-1)),e("span",J,n(i.prevArticle.title),1)])):d("",!0),i.nextArticle?(c(),o("div",{key:1,class:"next-article",onClick:t[1]||(t[1]=a=>r.goToArticle(i.nextArticle.id))},[t[7]||(t[7]=e("span",{class:"nav-label"},"下一篇",-1)),e("span",K,n(i.nextArticle.title),1)])):d("",!0)]),e("div",O,[e("h3",Q,"评论 ("+n(i.comments.length)+")",1),e("div",R,[y(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>i.newComment=a),placeholder:"写下你的评论...",rows:"4"},null,512),[[D,i.newComment]]),e("button",{class:"submit-comment",onClick:t[3]||(t[3]=(...a)=>r.submitComment&&r.submitComment(...a))},"提交评论")]),e("div",W,[(c(!0),o(v,null,u(i.comments,a=>(c(),o("div",{key:a.id,class:"comment-item"},[e("div",X,n(a.author.charAt(0)),1),e("div",Z,[e("div",$,[e("span",tt,n(a.author),1),e("span",et,n(r.formatDate(a.time)),1)]),e("div",st,n(a.content),1),e("div",it,[e("button",{class:"like-btn",onClick:_=>r.likeComment(a.id)},[t[8]||(t[8]=e("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"})],-1)),h(" "+n(a.likes),1)],8,at)])])]))),128))])])])):(c(),o("div",nt,"加载中..."))])])}const rt=A(T,[["render",ot],["__scopeId","data-v-0b58ee1a"]]);export{rt as default};
