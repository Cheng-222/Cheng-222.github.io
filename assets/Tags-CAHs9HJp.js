import{g as v,a as T}from"./storage-Dkmu0FnL.js";import{_ as P,c,o as n,a as t,t as o,e as _,F as m,r as p,i as C,l as y,b as h,h as k,n as f,w as b}from"./index-DqUWjSwh.js";const w={name:"Tags",data(){return{articles:[],categories:[{id:1,name:"技术分享"},{id:2,name:"生活随笔"},{id:3,name:"资源记录"},{id:4,name:"项目经验"}],currentPage:1,totalPages:1}},computed:{currentTag(){return this.$route.params.tag}},created(){this.fetchTaggedArticles()},watch:{"$route.params.tag":function(){this.currentPage=1,this.fetchTaggedArticles()}},methods:{async fetchTaggedArticles(){const i=this.currentTag;try{const l=v().filter(s=>(Array.isArray(s.tags)?s.tags:typeof s.tags=="string"?s.tags.split(","):[]).map(a=>String(a).toLowerCase()).includes(String(i).toLowerCase())).map(s=>({...s,publishTime:new Date(s.publishTime)}));this.categories=T(),this.totalPages=Math.ceil(l.length/3)||1;const d=(this.currentPage-1)*3;this.articles=l.slice(d,d+3)}catch(e){console.error("加载标签文章失败:",e)}},formatDate(i){const e=new Date(i);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},getCategoryName(i){const e=this.categories.find(l=>l.id===i);return e?e.name:"未分类"},goToArticle(i){this.$router.push(`/article/${i}`)},goToTag(i){this.$router.push(`/tags/${i}`)},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchTaggedArticles())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchTaggedArticles())}}},x={class:"tags-container"},A={class:"tags-header"},S={class:"tags-title"},D={class:"main-content"},N={class:"content-wrapper"},B=["onClick"],L={class:"article-header"},M={class:"article-title"},z={class:"article-meta"},V={class:"publish-time"},F={class:"article-excerpt"},I={class:"article-footer"},E={class:"article-tags"},Y=["onClick"],j={class:"article-stats"},q={class:"stat-item"},G={class:"stat-item"},H={key:0,class:"no-articles"},J={key:1,class:"pagination"},K=["disabled"],O={class:"page-info"},Q=["disabled"];function R(i,e,l,d,s,r){const u=k("router-link");return n(),c("div",x,[t("div",A,[t("h1",S,"标签: #"+o(r.currentTag),1),e[2]||(e[2]=t("p",{class:"tags-description"},"查看所有包含此标签的文章",-1))]),t("div",D,[t("div",N,[(n(!0),c(m,null,p(s.articles,a=>(n(),c("article",{key:a.id,class:"article-card",onClick:g=>r.goToArticle(a.id)},[t("div",L,[t("h2",M,o(a.title),1),t("div",z,[t("span",V,o(r.formatDate(a.publishTime)),1),t("span",{class:f(["category",`category-${a.categoryId}`])},o(r.getCategoryName(a.categoryId)),3)])]),t("div",F,o(a.excerpt),1),t("div",I,[t("div",E,[(n(!0),c(m,null,p(a.tags,g=>(n(),c("span",{key:g,class:f(["tag",{active:g===r.currentTag}]),onClick:b(U=>r.goToTag(g),["stop"])}," #"+o(g),11,Y))),128))]),t("div",j,[t("span",q,[e[3]||(e[3]=t("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[t("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})],-1)),h(" "+o(a.views),1)]),t("span",G,[e[4]||(e[4]=t("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[t("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 0 .398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"})],-1)),h(" "+o(a.comments),1)])])])],8,B))),128)),s.articles.length===0?(n(),c("div",H,[t("p",null,'没有找到包含标签 "'+o(r.currentTag)+'" 的文章',1),C(u,{to:"/",class:"back-home"},{default:y(()=>[...e[5]||(e[5]=[h("返回首页",-1)])]),_:1})])):_("",!0),s.articles.length>0?(n(),c("div",J,[t("button",{class:"page-btn",disabled:s.currentPage===1,onClick:e[0]||(e[0]=(...a)=>r.prevPage&&r.prevPage(...a))},"上一页",8,K),t("span",O,o(s.currentPage)+" / "+o(s.totalPages),1),t("button",{class:"page-btn",disabled:s.currentPage===s.totalPages,onClick:e[1]||(e[1]=(...a)=>r.nextPage&&r.nextPage(...a))},"下一页",8,Q)])):_("",!0)])])])}const Z=P(w,[["render",R],["__scopeId","data-v-0dd68dc3"]]);export{Z as default};
