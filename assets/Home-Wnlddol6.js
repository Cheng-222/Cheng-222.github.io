import{g as m,a as u,b as p}from"./storage-Dkmu0FnL.js";import{_ as f,c as n,o as l,a as t,t as o,F as d,r as h,n as v,w as b,b as _}from"./index-DqUWjSwh.js";const P={name:"Home",data(){return{articles:[],categories:[{id:1,name:"技术分享"},{id:2,name:"生活随笔"},{id:3,name:"资源记录"},{id:4,name:"项目经验"}],currentPage:1,totalPages:3,home:{title:"",subtitle:""}}},mounted(){this.home=p(),this.fetchArticles()},methods:{async fetchArticles(){try{const a=m();this.totalPages=Math.ceil(a.length/3)||1;const e=(this.currentPage-1)*3;this.articles=a.slice(e,e+3).map(i=>({...i,publishTime:new Date(i.publishTime),tags:Array.isArray(i.tags)?i.tags:typeof i.tags=="string"?i.tags.split(","):[]})),this.categories=u()}catch(a){console.error("加载本地文章失败:",a)}},formatDate(a){const e=new Date(a);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},getCategoryName(a){const e=this.categories.find(i=>i.id===a);return e?e.name:"未分类"},goToArticle(a){this.$router.push(`/article/${a}`)},goToTag(a){this.$router.push(`/tags/${a}`)},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchArticles())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchArticles())},toggleHomeEdit(){this.editingHome=!this.editingHome},saveHome(){setHomeConfig(this.home),this.editingHome=!1,alert("首页文案已保存")}}},C={class:"home-container"},y={class:"blog-header"},x={class:"header-content"},A={class:"blog-title"},k={class:"blog-subtitle"},T={class:"main-content"},H={class:"content-wrapper"},w=["onClick"],D={class:"article-header"},S={class:"article-title"},B={class:"article-meta"},M={class:"publish-time"},z={class:"article-excerpt"},N={class:"article-footer"},F={class:"article-tags"},I=["onClick"],E={class:"article-stats"},V={class:"stat-item"},L={class:"stat-item"},Y={class:"pagination"},j=["disabled"],q={class:"page-info"},G=["disabled"];function J(a,e,i,K,r,c){return l(),n("div",C,[t("header",y,[t("div",x,[t("h1",A,o(r.home.title),1),t("p",k,o(r.home.subtitle),1)])]),t("main",T,[t("div",H,[(l(!0),n(d,null,h(r.articles,s=>(l(),n("article",{key:s.id,class:"article-card",onClick:g=>c.goToArticle(s.id)},[t("div",D,[t("h2",S,o(s.title),1),t("div",B,[t("span",M,o(c.formatDate(s.publishTime)),1),t("span",{class:v(["category",`category-${s.categoryId}`])},o(c.getCategoryName(s.categoryId)),3)])]),t("div",z,o(s.excerpt),1),t("div",N,[t("div",F,[(l(!0),n(d,null,h(s.tags,g=>(l(),n("span",{key:g,class:"tag",onClick:b(O=>c.goToTag(g),["stop"])}," #"+o(g),9,I))),128))]),t("div",E,[t("span",V,[e[2]||(e[2]=t("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[t("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})],-1)),_(" "+o(s.views),1)]),t("span",L,[e[3]||(e[3]=t("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[t("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 0 .398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"})],-1)),_(" "+o(s.comments),1)])])])],8,w))),128)),t("div",Y,[t("button",{class:"page-btn",disabled:r.currentPage===1,onClick:e[0]||(e[0]=(...s)=>c.prevPage&&c.prevPage(...s))},"上一页",8,j),t("span",q,o(r.currentPage)+" / "+o(r.totalPages),1),t("button",{class:"page-btn",disabled:r.currentPage===r.totalPages,onClick:e[1]||(e[1]=(...s)=>c.nextPage&&c.nextPage(...s))},"下一页",8,G)])])])])}const U=f(P,[["render",J],["__scopeId","data-v-7386cee3"]]);export{U as default};
