import{_ as y,c as n,a as e,t as o,e as p,F as u,r as m,g as C,h as v,b as h,i as f,o as l,n as P,w}from"./index-CeUlyrV-.js";const b={name:"Category",data(){return{articles:[],categories:[{id:1,name:"技术分享",description:"分享前端、后端、算法等技术文章"},{id:2,name:"生活随笔",description:"记录生活中的点点滴滴"},{id:3,name:"读书笔记",description:"阅读心得和知识总结"},{id:4,name:"项目经验",description:"项目开发中的经验和教训"}],currentPage:1,totalPages:1}},computed:{currentCategory(){const a=parseInt(this.$route.params.id);return this.categories.find(t=>t.id===a)}},created(){this.fetchCategoryArticles()},watch:{"$route.params.id":function(){this.currentPage=1,this.fetchCategoryArticles()}},methods:{async fetchCategoryArticles(){try{const a=parseInt(this.$route.params.id)||1,t=await fetch(`http://localhost:3000/api/categories/${a}`);this.currentCategory=await t.json();const d=await(await fetch(`http://localhost:3000/api/categories/${a}/articles`)).json();this.articles=d.map(s=>({...s,publishTime:new Date(s.publishTime),tags:typeof s.tags=="string"?s.tags.split(","):s.tags}));const r=await fetch("http://localhost:3000/api/categories");this.categories=await r.json(),this.totalPages=Math.ceil(this.articles.length/10)}catch(a){console.error("获取分类文章失败:",a);const t=parseInt(this.$route.params.id)||1,c={categories:[{id:1,name:"前端开发",description:"前端相关技术分享，包括HTML、CSS、JavaScript、Vue等"},{id:2,name:"后端开发",description:"后端相关技术分享，包括Node.js、数据库、API设计等"},{id:3,name:"技术人生",description:"技术成长、学习方法、职业发展等话题"}],articles:{1:[{id:1,title:"Vue 3 Composition API 最佳实践",publishTime:new Date("2024-01-15"),categoryId:1,excerpt:"Vue 3 的 Composition API 为我们提供了更灵活的组件逻辑组织方式，本文将分享一些在实际项目中使用 Composition API 的最佳实践...",tags:["Vue3","Composition API","前端开发"],views:1234,comments:56},{id:4,title:"CSS Grid 布局完全指南",publishTime:new Date("2024-01-08"),categoryId:1,excerpt:"CSS Grid 是一个强大的二维布局系统，本文将详细介绍 Grid 布局的各种属性和使用方法...",tags:["CSS","Grid","前端开发"],views:987,comments:43}],2:[{id:3,title:"Node.js 性能优化技巧",publishTime:new Date("2024-01-05"),categoryId:2,excerpt:"Node.js 作为服务端 JavaScript 运行环境，其性能优化一直是开发者关注的焦点。本文将介绍一些实用的性能优化技巧...",tags:["Node.js","性能优化","后端开发"],views:1567,comments:78}],3:[{id:2,title:"如何高效学习新技术栈",publishTime:new Date("2024-01-10"),categoryId:3,excerpt:"在技术快速迭代的今天，如何高效地学习新技术栈成为每个开发者都需要面对的挑战。本文将分享我的一些学习方法和经验...",tags:["学习方法","职业发展"],views:890,comments:34}]}};this.currentCategory=c.categories.find(d=>d.id===t)||c.categories[0],this.articles=c.articles[t]||[],this.categories=c.categories,this.totalPages=Math.ceil(this.articles.length/10)}},formatDate(a){const t=new Date(a);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},getCategoryName(a){const t=this.categories.find(c=>c.id===a);return t?t.name:"未分类"},goToArticle(a){this.$router.push(`/article/${a}`)},goToTag(a){this.$router.push(`/tags/${a}`)},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}},I={class:"category-container"},k={class:"category-header"},x={class:"category-title"},S={class:"category-description"},T={class:"main-content"},A={class:"content-wrapper"},D=["onClick"],N={class:"article-header"},V={class:"article-title"},j={class:"article-meta"},M={class:"publish-time"},B={class:"article-excerpt"},z={class:"article-footer"},G={class:"article-tags"},R=["onClick"],F={class:"article-stats"},J={class:"stat-item"},L={class:"stat-item"},E={key:0,class:"no-articles"},H={key:1,class:"pagination"},Y=["disabled"],q={class:"page-info"},K=["disabled"];function O(a,t,c,d,r,s){const _=f("router-link");return l(),n("div",I,[e("div",k,[e("h1",x,o(s.currentCategory?s.currentCategory.name:"分类"),1),e("p",S,o(s.currentCategory?s.currentCategory.description:"查看所有文章分类"),1)]),e("div",T,[e("div",A,[(l(!0),n(u,null,m(r.articles,i=>(l(),n("article",{key:i.id,class:"article-card",onClick:g=>s.goToArticle(i.id)},[e("div",N,[e("h2",V,o(i.title),1),e("div",j,[e("span",M,o(s.formatDate(i.publishTime)),1),e("span",{class:P(["category",`category-${i.categoryId}`])},o(s.getCategoryName(i.categoryId)),3)])]),e("div",B,o(i.excerpt),1),e("div",z,[e("div",G,[(l(!0),n(u,null,m(i.tags,g=>(l(),n("span",{key:g,class:"tag",onClick:w(Q=>s.goToTag(g),["stop"])}," #"+o(g),9,R))),128))]),e("div",F,[e("span",J,[t[2]||(t[2]=e("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})],-1)),h(" "+o(i.views),1)]),e("span",L,[t[3]||(t[3]=e("svg",{class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 0 .398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"})],-1)),h(" "+o(i.comments),1)])])])],8,D))),128)),r.articles.length===0?(l(),n("div",E,[t[5]||(t[5]=e("p",null,"该分类下暂无文章",-1)),C(_,{to:"/",class:"back-home"},{default:v(()=>[...t[4]||(t[4]=[h("返回首页",-1)])]),_:1})])):p("",!0),r.articles.length>0?(l(),n("div",H,[e("button",{class:"page-btn",disabled:r.currentPage===1,onClick:t[0]||(t[0]=(...i)=>s.prevPage&&s.prevPage(...i))},"上一页",8,Y),e("span",q,o(r.currentPage)+" / "+o(r.totalPages),1),e("button",{class:"page-btn",disabled:r.currentPage===r.totalPages,onClick:t[1]||(t[1]=(...i)=>s.nextPage&&s.nextPage(...i))},"下一页",8,K)])):p("",!0)])])])}const W=y(b,[["render",O],["__scopeId","data-v-c5996a68"]]);export{W as default};
